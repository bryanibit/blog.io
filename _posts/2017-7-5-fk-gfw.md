---
layout: post
title: How to fly over GFW
date: 2017-07-19
categories: blog
tags: [技术总结]
description: Cross GFW and use Goagent in terminal
---

## Download Goagent

百度云已经配置好的GoAgent(sceret)

## 配置

### windows chrome

1. 下载[xx-net](https://github.com/bryanibit/XX-Net)
2. 因为要使用自己的账号，所以需要在chrome中上传
3. use it

### 在Ubuntu中结合foxyproxy实现翻墙

1. 下载foxproxy
2. Proxies 中 添加 goagent
* proxy details中 manual中添加127.0.0.1:8087
* URL Patterns中
* Do not use this proxy for internal IP addresses
3. Pattern Subscription
* Subscription URL: https://raw.githubusercontent.com/gfwlist/gfwlist/master/gfwlist.txt
* Proxies: add proxies 用刚刚2中的GoAgent
* Format: Autoproxy   obfuscation: base64
4. Quick add
* enabled

## Terminal use

        export https_proxy="127.0.0.1:8087"
        export http_proxy="127.0.0.1:8087"

[option]

git config --global http.sslVerify false

then git config uses proxy agent.

When you use export, you could use 
      
        curl ip.gs

check the ip address

Of course, you should install curl

        sudo apt-get install curl

### 解除GoAgent占用端口问题

**直接关闭GoAgent会占用8087端口问题**

```
inin@inin-pc:~$ sudo lsof -i:8087
COMMAND  PID USER   FD   TYPE DEVICE SIZE/OFF NODE NAME
python  2274 root    6u  IPv4  16595      0t0  TCP localhost:8087 (LISTEN)
inin@inin-pc:~$ kill 2274
```

## xx-net使用

登录[xx-net](https://github.com/XX-net/XX-Net/wiki/How-to-use)的使用方法一节，下载源码，无需下载百度云盘中的GoAgent源码

1. 安装下面软件
```
sudo apt-get install python-openssl
sudo apt-get install libffi-dev
sudo apt-get install python-gtk2
sudo apt-get install python-appindicator
sudo apt-get install libnss3-tools
```
2. 后台运行：在终端中运行：
         xx_net.sh start/stop/restart
此时会出现提示（在浏览器中键入127.0.0.1;8085)，*配置浏览器设置*，使用上面的在Ubuntu中结合foxyproxy实现翻墙内容配置即可

3. 开机自启：在/etc/rc.local中添加一行：（可选）
sudo /home/username/xxnet/xx_net.sh start

## vps配置

http://blog.csdn.net/boxuerixin/article/details/72393518
http://www.cnvultr.com/416.html

我还没有试试上面教程，只是我的同学试过，可以使用。

## Ubuntu上配置shadowsocks

1. 完成ss-qt5的安装

```
sudo add-apt-repository ppa:hzwhuang/ss-qt5
sudo apt-get update
sudo apt-get install shadowsocks-qt5
```

可以去[launchpad](https://launchpad.net/)搜索并下载.deb源文件。

2. 新建gui-config.json,放在自己机器上一个可访问的目录

3. 打开terminal,输入 ss-qt5

4. 在弹出的connection Manager界面上file -> import Connections from gui-config.json(选择步骤2中保存的gui-config.json)

5. 配置浏览器的代理

## macOS 配置

[参考这个链接下载shadowsocks](https://lvii.gitbooks.io/outman/content/)

## Google cloud platform vm实例

首先注册Google云后，新建vm实例，选择亚洲区，选择CPU为单核即可，选择系统为

```
Debian GNU/Linux 8 (jessie)
amd64 built on 20180611
```

勾选允许HTTP和HTTPS流量。

使用ssh登录vm实例后：

```
sudo -i
wget -N --no-check-certificate https://raw.githubusercontent.com/FunctionClub/YankeeBBR/master/bbr.sh && bash bbr.sh install
```

Abort kernel removal? Choose No. Then we reboot the system. Log the system with ssh another time.

```
sudo -i
bash bbr.sh start
wget --no-check-certificate https://raw.githubusercontent.com/teddysun/shadowsocks_install/master/shadowsocksR.sh && chmod +x shadowsocksR.sh
./shadowsocksR.sh
```

Input the password and port ID. And then enter all the time.

在防火墙规则中的**default-allow-http** 和 **default-allow-https**中的TCP和UDP端口改为上面设置的端口号。
